<div id="cover">
  <div class="header">
    <div class="imageslideshow">
      <div class="images">
        <img src="photos/london.jpg" alt="london"/>
      </div>

      <div class="images"> 
        <img src="photos/japan.jpg" alt="japan"/> 
      </div>

      <div class="images">
        <img src="photos/italy.jpg" alt="italy"/>
      </div>

      <div class="images">
      <img src="photos/sanfran.jpg" alt="san francisco"/>
      </div>

      <div class="images"> 
      <img src="photos/newyork.jpg" alt="new york"/>
      </div>

      <div class="images"> 
      <img src="photos/thailand.jpg" alt="bali"/> 
      </div>

      <div class="images"> 
      <img src="photos/australia.jpg" alt="australia"/> 
      </div>
    </div>
  </div>

  <div id="search-wrapper">
    <div class="searchevent container">
      <input type="text" id="search" placeholder="Enter location and date (ex. boston 04-23, canada)">
      <input type="date" id="date" name="date">
      <button type="button" id="submit" class="btn btn-outline-success">Search</button>
    </div>
  </div>
</div>
  
<hr>

<!--outputs-->
<div class="outputs">
  <div class="events">
    <h2>EVENTS</h2> <span id="loader1"></span>
    <table style="width:100%" id="eventsresults">
    </table>
  </div>
  
  <hr>

  <div class="restaurants">
    <h2>RESTAURANTS</h2><span id="loader2"></span>
    <table style="width:100%" id="restresults">
    </table>
  </div>

  <hr>

  <div class="pois">
    <h2>POINTS OF INTERESTS</h2><span id="loader3"></span>
    <table style="width:100%" id="poisresults">
    </table>
  </div>

</div>

<!--events output-->
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
  document.getElementById("submit").addEventListener("click", function(){
    document.getElementById("loader1").innerHTML = "Loading...";
    document.getElementById("eventsresults").innerHTML = "<tr> <th>Name</th> <th>Date</th> <th>Free?</th> </tr>"
    var queryData = document.getElementById("search").value;
    axios.post('/events', {
      query: encodeURI(queryData)
    })
    .then(function (response) {
      console.log(response.data.events);
      var table = document.getElementById("eventsresults");
      var html = "<tr> <th>Name</th> <th>Date</th> <th>Free?</th> </tr>"
      response.data.events.forEach(function(event){
        html += "<tr> <td>" + event.name.text + "</td><td>" + (new Date(event.start.utc)).toLocaleDateString() + "</td><td>" + event.is_free + "</td></tr>"
      })
      table.innerHTML = html;
      document.getElementById("loader1").innerHTML = ""
    })
    .catch(function (error) {
      console.log(error);
      alert("Error! Please check console!")
      document.getElementById("loader1").innerHTML = ""
    });
  });
</script>

<script>
  document.getElementById("submit").addEventListener("click", function(){
    document.getElementById("loader2").innerHTML = "Loading...";
    document.getElementById("restresults").innerHTML = "<tr> <th>Name</th> <th>Address</th> <th>Cuisine</th> </tr>"
    var queryData = document.getElementsById("search").value;
    axios.post('/zomato', {
      query: encodeURI(queryData)
    })
    .then(function (response) {
      console.log(response.data.restaurants);
      var table = document.getElementsById("restresults");
      var html = "<tr> <th>Name</th> <th>Address</th> <th>Cuisine</th> </tr>"
      response.data.restaurants.forEach(function(rest) {
        html += "<tr> <td>" + rest.results.found + "</td><td>" + rest.restaurant.location.address + "</td><td>" + rest.restaurant.cuisines +"</td></tr>"
      })
      table.innerHTML = html;
      document.getElementById("loader2").innerHTML = ""
    })
    .catch(function (error) {
      console.log(error);
      alert("Error! Please check console!")
      document.getElementById("loader2").innerHTML = ""
    })
  })
</script>

<script>
  document.getElementById("submit").addEventListener("click", function(){
    document.getElementById("loader3").innerHTML = "Loading...";
    document.getElementById("poisresults").innerHTML = "<tr> <th>Place</th> <th>Address</th> </tf>"
    var queryData = document.getElementsById("search").value;
    axios.post('/pois', {
      query: encodeURI(queryData)
    })
    .then(function (response) {
      console.log(response.data.results);
      var table = document.getElementsById("poisresults");
      var html = "<tr> <th>Place</th> <th>Address</th> </tf>"
      response.data.results.forEach(function(poi) {
        html += "<tr> <td>" + poi.name +  "</td></tr>"
      })
      table.innerHTML = html;
      document.getElementById("loader3").innerHTML = ""
    })
    .catch(function (error) {
      console.log(error);
      alert("Error! Please check console!")
      document.getEelementById("loader3").innerHTML = ""
    })
  })
</script>

{{#if userData}}
  <script>
    userObj = {{{userData}}};
    console.log(userObj);
    axios.post('/users', {
      userData: userObj
    })
    .then(function (res) {
      console.log(res);
    })
    .catch(function (err) {
      console.log(err);
    });
  </script>
{{/if}}

<!--runs image slideshow-->
<!--script>
var slideIndex = 0;
showSlides();

function showSlides() {
    var i;
    var slides = document.getElementsByClassName("images");
    for (i = 0; i < slides.length; i++) {
       slides[i].style.display = "none";  
    }
    slideIndex++;
    if (slideIndex > slides.length) {slideIndex = 1}    
    slides[slideIndex-1].style.display = "block"; 
    setTimeout(showSlides, 6000); 
}
</script-->